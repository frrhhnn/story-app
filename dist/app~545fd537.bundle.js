"use strict";(self.webpackChunkstory_app=self.webpackChunkstory_app||[]).push([[703],{457:(t,e,r)=>{r.d(e,{A:()=>g});var n=r(187),i=r(829);r(504),r(699);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function h(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(e,r,n,i){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype);return h(a,"_invoke",function(e,r,n){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=x(u,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===i)throw i=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=3;var s=f(e,r,n);if("normal"===s.type){if(i=n.done?4:2,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i=4,n.method="throw",n.arg=s.arg)}}}(e,n,new j(i||[])),!0),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p={};function d(){}function v(){}function m(){}var y={};h(y,u,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(P([])));w&&w!==r&&n.call(w,u)&&(y=w);var b=m.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(i,a,u,c){var s=f(t[i],t,a);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==o(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,u,c)}),(function(t){r("throw",t,u,c)})):e.resolve(l).then((function(t){h.value=t,u(h)}),(function(t){return r("throw",t,u,c)}))}c(s.arg)}var i;h(this,"_invoke",(function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}),!0)}function x(e,r){var n=r.method,i=e.i[n];if(i===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(i,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var a=o.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(t){this.tryEntries.push(t)}function S(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function P(e){if(null!=e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(o(e)+" is not iterable")}return v.prototype=m,h(b,"constructor",m),h(m,"constructor",v),v.displayName=h(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,h(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},_(k.prototype),h(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),h(b,s,"Generator"),h(b,u,(function(){return this})),h(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var i=r.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],u=this.prev,c=o[1],s=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!s)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=u){if(u<c)return this.method="next",this.arg=t,n(c),!0;if(u<s)return n(s),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var i=n;break}}i&&("break"===t||"continue"===t)&&i[0]<=e&&e<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i[2],p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var i=n.arg;S(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:P(e),r,n},"next"===this.method&&(this.arg=t),p}},e}function u(t,e,r,n,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,i)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){u(o,n,i,a,c,"next",t)}function c(t){u(o,n,i,a,c,"throw",t)}a(void 0)}))}}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function h(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}const l=function(){return t=function t(e){var r=e.view;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=r,this._stream=null,this._photoFile=null,this._cameraDevices=[],window.addEventListener("hashchange",this._handlePageLeave.bind(this))},e=[{key:"setPhotoFile",value:function(t){this._photoFile=t}},{key:"populateCameraDevices",value:(f=c(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.enumerateDevices();case 3:e=t.sent,this._cameraDevices=e.filter((function(t){return"videoinput"===t.kind})),this._view.updateCameraDevices(this._cameraDevices),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),(0,i._d)("Gagal memuat daftar kamera: ".concat(t.t0.message));case 11:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return f.apply(this,arguments)})},{key:"handleCameraButtonClick",value:(l=c(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this._stream){t.next=5;break}return this._stopMediaStream(),this._view.updateCameraUI(!1,null!==this._photoFile),t.abrupt("return");case 5:return t.next=7,this._startCamera();case 7:this._view.updateCameraUI(!0,!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,i._d)("Gagal mengakses kamera: ".concat(t.t0.message));case 13:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(){return l.apply(this,arguments)})},{key:"handleCameraChange",value:(h=c(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._startCamera(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),(0,i._d)("Gagal mengganti kamera: ".concat(t.t0.message));case 8:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t){return h.apply(this,arguments)})},{key:"handlePhotoCapture",value:function(t){this._photoFile=t;var e=URL.createObjectURL(t);this._view.updatePhotoPreview(e),this._stopMediaStream(),this._view.updateCameraUI(!1,!0)}},{key:"handleFormSubmit",value:(u=c(a().mark((function t(e){var r,o,u,c,s,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.description,o=e.location,t.prev=1,u=[],r&&""!==r.trim()||u.push("Deskripsi cerita wajib diisi"),this._photoFile||u.push("Foto cerita wajib diisi"),o||u.push("Lokasi cerita wajib dipilih"),!(u.length>0)){t.next=9;break}return(0,i._d)(u.join("\n")),t.abrupt("return");case 9:return(0,i.Cs)(),(c=new FormData).append("description",r.trim()),c.append("photo",this._photoFile),c.append("lat",o.lat),c.append("lon",o.lng),t.next=17,n.A.addNewStory({description:r.trim(),photo:this._photoFile,lat:o.lat,lon:o.lng});case 17:if(!(s=t.sent).error){t.next=20;break}throw new Error(s.message||"Gagal menambahkan cerita");case 20:(0,i._d)("Story berhasil ditambahkan!"),this._stopMediaStream(),this._cleanup(),h=new CustomEvent("story-added",{detail:{story:s.data.story}}),window.dispatchEvent(h),window.location.hash="#/home",t.next=33;break;case 28:t.prev=28,t.t0=t.catch(1),(0,i.RZ)(),(0,i._d)(t.t0.message||"Gagal menambahkan story");case 33:return t.prev=33,(0,i.RZ)(),t.finish(33);case 36:case"end":return t.stop()}}),t,this,[[1,28,33,36]])}))),function(t){return u.apply(this,arguments)})},{key:"_startCamera",value:(o=c(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._stream&&this._stopMediaStream(),r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"},audio:!1},t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia(r);case 5:this._stream=t.sent,this._view.setCameraStream(this._stream),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(2),(0,i._d)("Gagal memulai kamera: ".concat(t.t0.message));case 13:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(t){return o.apply(this,arguments)})},{key:"_stopMediaStream",value:function(){this._stream&&(this._stream.getTracks().forEach((function(t){return t.stop()})),this._stream=null)}},{key:"_cleanup",value:function(){this._photoFile=null,this._stopMediaStream()}},{key:"_handlePageLeave",value:function(){this._stopMediaStream(),this._cleanup()}}],e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,o,u,h,l,f}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(){p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(e,r,n,i){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype);return c(a,"_invoke",function(e,r,n){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=x(u,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===i)throw i=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=3;var s=h(e,r,n);if("normal"===s.type){if(i=n.done?4:2,s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i=4,n.method="throw",n.arg=s.arg)}}}(e,n,new j(i||[])),!0),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var l={};function d(){}function v(){}function m(){}var y={};c(y,o,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(P([])));w&&w!==r&&n.call(w,o)&&(y=w);var b=m.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(i,o,a,u){var c=h(t[i],t,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==f(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;c(this,"_invoke",(function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}),!0)}function x(e,r){var n=r.method,i=e.i[n];if(i===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),l;var o=h(i,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,l;var a=o.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,l):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,l)}function E(t){this.tryEntries.push(t)}function S(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function P(e){if(null!=e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(f(e)+" is not iterable")}return v.prototype=m,c(b,"constructor",m),c(m,"constructor",v),v.displayName=c(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},_(k.prototype),c(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(s(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var i=r.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],u=this.prev,c=o[1],s=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!s)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=u){if(u<c)return this.method="next",this.arg=t,n(c),!0;if(u<s)return n(s),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var i=n;break}}i&&("break"===t||"continue"===t)&&i[0]<=e&&e<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i[2],l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var i=n.arg;S(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:P(e),r,n},"next"===this.method&&(this.arg=t),l}},e}function d(t,e,r,n,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,i)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){d(o,n,i,a,u,"next",t)}function u(t){d(o,n,i,a,u,"throw",t)}a(void 0)}))}}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function y(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(e)?e:e+""}const g=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._presenter=null,this._selectedLocation=null},e=[{key:"render",value:(o=v(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.NI)());case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=v(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._presenter=new l({view:this}),this._initializeForm(),this._initializeMap(),this._initializeCameraHandlers(),this._initializeFileUpload();case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_initializeForm",value:function(){var t=this,e=document.querySelector("#addStoryForm");e&&e.addEventListener("submit",function(){var e=v(p().mark((function e(r){var n,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=document.querySelector("#description").value,i=t._selectedLocation?t._selectedLocation.getLatLng():null,e.next=5,t._presenter.handleFormSubmit({description:n,location:i,photoFile:t._presenter._photoFile});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"_initializeMap",value:function(){var t=this;if(document.querySelector("#mapAdd")){var e=L.map("mapAdd").setView([-2.548926,118.014863],5);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),e.on("click",(function(r){t._selectedLocation?t._selectedLocation.setLatLng(r.latlng):t._selectedLocation=L.marker(r.latlng).addTo(e);var n=document.querySelector("#selectedLocation");n&&(n.textContent="".concat(r.latlng.lat.toFixed(6),", ").concat(r.latlng.lng.toFixed(6)))}))}}},{key:"_initializeFileUpload",value:function(){var t=this,e=document.querySelector(".photo-input-container"),r=document.querySelector("#photoFile"),n=document.querySelector("#photoPreview");function i(t){t.preventDefault(),t.stopPropagation()}e&&r&&n&&(["dragenter","dragover","dragleave","drop"].forEach((function(t){e.addEventListener(t,i,!1),document.body.addEventListener(t,i,!1)})),["dragenter","dragover"].forEach((function(t){e.addEventListener(t,(function(){e.classList.add("drag-over")}))})),["dragleave","drop"].forEach((function(t){e.addEventListener(t,(function(){e.classList.remove("drag-over")}))})),e.addEventListener("drop",(function(e){var n=e.dataTransfer.files;n.length&&(r.files=n,t._handleFileSelect(n[0]))})),r.addEventListener("change",(function(e){e.target.files.length&&t._handleFileSelect(e.target.files[0])})))}},{key:"_handleFileSelect",value:function(t){var e=this,r=document.querySelector("#photoPreview");if(r)if(t.type.startsWith("image/")){this._presenter.setPhotoFile(t);var n=new FileReader;n.onload=function(t){r.innerHTML='\n        <div class="photo-preview-content">\n          <img src="'.concat(t.target.result,'" alt="Preview foto">\n          <button type="button" class="btn btn-danger remove-photo">\n            <i class="fas fa-trash"></i> Hapus Foto\n          </button>\n        </div>\n      ');var n=r.querySelector(".remove-photo");n&&n.addEventListener("click",(function(){e._presenter.setPhotoFile(null),r.innerHTML='\n            <div class="preview-placeholder">\n              <i class="fas fa-image"></i>\n              <p>Pratinjau foto akan muncul di sini</p>\n            </div>\n          '}))},n.readAsDataURL(t)}else showResponseMessage("Mohon pilih file gambar")}},{key:"_initializeCameraHandlers",value:function(){var t=this,e=document.querySelector("#startCamera"),r=document.querySelector("#capturePhoto"),n=document.querySelector("#cameraPreview"),i=document.querySelector("#photoCanvas"),o=document.querySelector("#photoPreview");e&&e.addEventListener("click",(function(){t._presenter.handleCameraButtonClick()})),r&&r.addEventListener("click",(function(){if(n&&i&&o){var e=i.getContext("2d");i.width=n.videoWidth,i.height=n.videoHeight,e.drawImage(n,0,0),i.toBlob((function(e){var r=URL.createObjectURL(e);o.innerHTML='\n            <img src="'.concat(r,'" alt="Captured photo">\n            <button type="button" class="btn btn-danger remove-photo">\n              <i class="fas fa-trash"></i> Hapus Foto\n            </button>\n          '),t._presenter.setPhotoFile(e);var n=o.querySelector(".remove-photo");n&&n.addEventListener("click",(function(){t._presenter.setPhotoFile(null),o.innerHTML='\n                <div class="preview-placeholder">\n                  <i class="fas fa-image"></i>\n                  <p>Pratinjau foto akan muncul di sini</p>\n                </div>\n              '}))}),"image/jpeg"),t._presenter._stopMediaStream(),t.updateCameraUI(!1,!0)}}))}},{key:"updateCameraUI",value:function(t,e){var r=document.querySelector("#startCamera"),n=document.querySelector("#capturePhoto"),i=document.querySelector("#cameraPreview");r&&(r.textContent=t?"Tutup Kamera":"Buka Kamera"),n&&(n.style.display=t?"block":"none"),i&&(i.style.display=t?"block":"none",t&&this._presenter._stream&&(i.srcObject=this._presenter._stream))}},{key:"setCameraStream",value:function(t){var e=document.querySelector("#cameraPreview");e&&t&&(e.srcObject=t,e.play())}}],e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}()},581:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){i=function(){return e};var t,e={},r=Object.prototype,o=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function h(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(e,r,n,i){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype);return h(a,"_invoke",function(e,r,n){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=x(u,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===i)throw i=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=3;var s=f(e,r,n);if("normal"===s.type){if(i=n.done?4:2,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i=4,n.method="throw",n.arg=s.arg)}}}(e,n,new j(i||[])),!0),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p={};function d(){}function v(){}function m(){}var y={};h(y,u,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(P([])));w&&w!==r&&o.call(w,u)&&(y=w);var b=m.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(i,a,u,c){var s=f(t[i],t,a);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==n(l)&&o.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,u,c)}),(function(t){r("throw",t,u,c)})):e.resolve(l).then((function(t){h.value=t,u(h)}),(function(t){return r("throw",t,u,c)}))}c(s.arg)}var i;h(this,"_invoke",(function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}),!0)}function x(e,r){var n=r.method,i=e.i[n];if(i===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(i,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var a=o.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function E(t){this.tryEntries.push(t)}function S(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(E,this),this.reset(!0)}function P(e){if(null!=e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(o.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return v.prototype=m,h(b,"constructor",m),h(m,"constructor",v),v.displayName=h(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,h(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},_(k.prototype),h(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new k(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),h(b,s,"Generator"),h(b,u,(function(){return this})),h(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var i=r.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],u=this.prev,c=o[1],s=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!s)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=u){if(u<c)return this.method="next",this.arg=t,n(c),!0;if(u<s)return n(s),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var i=n;break}}i&&("break"===t||"continue"===t)&&i[0]<=e&&e<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i[2],p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var i=n.arg;S(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:P(e),r,n},"next"===this.method&&(this.arg=t),p}},e}function o(t,e,r,n,i,o,a){try{var u=t[o](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,i)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function u(t){o(a,n,i,u,c,"next",t)}function c(t){o(a,n,i,u,c,"throw",t)}u(void 0)}))}}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}r.d(e,{A:()=>s});const s=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(o=a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="about" id="mainContent" tabindex="0">\n        <div class="about__content">\n          <h2 class="content__heading">Tentang Kami</h2>\n          <p class="about__intro">\n            StoryApp adalah platform inovatif untuk berbagi cerita pengalaman, petualangan, dan inspirasi. \n            Dengan antarmuka yang intuitif, kamu dapat mengunggah cerita dengan foto, menandai lokasi di peta interaktif, \n            dan menjelajahi kisah dari komunitas global kami.\n          </p>\n\n          <h3 class="about__subheading">Misi Kami</h3>\n          <p class="about__mission">\n            Kami percaya setiap cerita memiliki kekuatan untuk menginspirasi dan menghubungkan. \n            StoryApp hadir untuk memberi ruang bagi semua orang untuk menceritakan kisah mereka, \n            dari petualangan kecil hingga momen yang mengubah hidup.\n          </p>\n\n          <h3 class="about__subheading">Fitur Unggulan</h3>\n          <div class="about__features">\n            <div class="feature__item">\n              <i class="fas fa-camera"></i>\n              <h4>Unggah dengan Mudah</h4>\n              <p>Abadikan momen dengan foto langsung dari kamera dan bagikan ceritamu dalam hitungan detik.</p>\n            </div>\n            <div class="feature__item">\n              <i class="fas fa-map-marked-alt"></i>\n              <h4>Peta Interaktif</h4>\n              <p>Tandai lokasi ceritamu dan jelajahi kisah dari berbagai penjuru dunia di peta kami.</p>\n            </div>\n            <div class="feature__item">\n              <i class="fas fa-globe"></i>\n              <h4>Komunitas Global</h4>\n              <p>Terhubung dengan pengguna lain, temukan inspirasi, dan jadilah bagian dari komunitas StoryApp.</p>\n            </div>\n          </div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.querySelectorAll('a[href^="#"]:not([href^="#/"])').forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault();var r=t.getAttribute("href").substring(1),n=document.getElementById(r);n&&n.scrollIntoView({behavior:"smooth"})}))}));case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}],e&&u(t.prototype,e),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}()}}]);
//# sourceMappingURL=app~545fd537.bundle.js.map